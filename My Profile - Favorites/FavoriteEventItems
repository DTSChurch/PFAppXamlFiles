{% assign personAliasId = CurrentPerson.PrimaryAliasId %}
{% following where:'PersonAliasId == {{personAliasId}} && EntityTypeId == 270 || EntityTypeId == 236' securityenabled:'false' %}
{% comment %}EntityTypeId == 270 is EventCalendarItem{% endcomment %}
{% assign size = followingItems | Size %}
{% if size > 0 %}
<StackLayout>
    {% for follow in followingItems %}
    {% eventcalendaritem id:'{{follow.EntityId}}' sort:'StartDateTime desc' securityenabled:'false' %}
    {% assign item = eventcalendaritem %}
            <StackLayout WidthRequest="180">
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding PushPage}" CommandParameter="63839327-b59a-439d-93aa-65bc09821143?ItemId={{ item.Id}}" />
                    </StackLayout.GestureRecognizers>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="3*"/>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Rock:StyledView
                        CornerRadius="15"
                        HasShadow="True"
                        Elevation="1"
                        Padding="0"
                        Margin="10,5,10,5"
                        Grid.Row="0"
                        Grid.Column="0"
                        Grid.ColumnSpan="3"
                        IsClippedToBounds="True">

                        <Rock:Image MarginBottom="-64" HeightRequest="220" Source="{{ 'Global' | Attribute:'PublicApplicationRoot' }}/GetImage.ashx?Id={{ item.EventItem.PhotoId }}" Aspect="AspectFill" VerticalOptions="CenterAndExpand"/>



                    </Rock:StyledView>


                    <Label Text="{{item.EventItem.Name | Escape}}" Margin="10,5,10,5" Grid.Row="1" Grid.Column="0" StyleClass="heading4, leading-none, text-bold"/>
                    <Label Text="Jan '21"  Margin="10,5,10,5" HorizontalTextAlignment="Right" Grid.Row="1" Grid.Column="1" StyleClass="heading4, leading-none"/>

                    <Rock:FollowingIcon EntityTypeId="{{ item.TypeId }}"
                        EntityId="{{ item.Id }}"
                        FontSize="25"
                        IsFollowed="{{ item | IsFollowed }}"
                        FollowingIconColor="{Rock:PaletteColor App-Primary}"
                        NotFollowingIconColor="{Rock:PaletteColor App-Primary}"
                        Grid.Row="1"
                        Grid.Column="2"
                        Margin="0,0,10,0"
                        HorizontalTextAlignment="Right" />

                </Grid>
            </StackLayout>
    {% endeventcalendaritem %}

    {% endfor %}
</StackLayout>
{% else %}
    <Grid MarginTop="20">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Label Text="No Favorites yet!"
        TextColor="{Rock:PaletteColor App-Primary}"
        VerticalTextAlignment="Center"
        HorizontalTextAlignment="Center"
        Grid.Row="0"
        Grid.Column="0"
        StyleClass="text-lg" />

    <Rock:Icon IconClass="star"
        FontSize="32"
        Grid.Row="0"
        Grid.Column="1"
        HorizontalTextAlignment="End"
        VerticalTextAlignment="Center"
        MarginRight="30"
        TextColor="{Rock:PaletteColor App-Primary}" />

</Grid>

{% endif %}
{% endfollowing %}
